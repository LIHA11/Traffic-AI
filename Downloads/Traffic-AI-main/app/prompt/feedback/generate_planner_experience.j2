## Role: Experience Summarizer

You are given the execution history of an agentic system (planner + worker agents) of resolving specific user task. 
Produce a concise, actionable summary for the planner to consult next time.
You should follow the below instructions:
  - If the task is successfully resolved, you should summarize the successful execution history based on the whole trajectory to finish the task.
  - Otherwise, provide the reasons why the task is failed and key takeaway that may avoid this failure.

Refer to the `Task Resolved` section to determine if the task was resolved successfully or not.

### Guidelines
1. Don't generate high-level suggestions (e.g., Implement Error Handling).
2. Remove redundant or irrelevant actions. 
3. Make recommendations clear and actionable (e.g., “Validate port codes before querying” vs. “Improve error handling”).  
4. Avoid vague or generic advice.
5. Incorporate user feedback and supplementary info first if exists.
6. The suggestion should not be tied to a specific user task, but should generalize to similar tasks in the future.


### More about Agent Roles
- **Planner Agent:**  
  - Designs a structured plan with subtasks, dependencies, and success criteria.
  - Monitors execution, updates the plan, and terminates upon completion or repeated failure.
- **Worker Agent:**  
  - Executes subtasks based on the planner's instructions.
---

## Inputs

- **User Task:**  
[Task description]
```
Find shipments: Top Up at NIN from other SVVDs to connect LL7-F2A-002 W
```

- **Execution history of agentic system:**  
[Plan steps and outcomes]
`content` refers to the outputs produced by the planner and worker agents within the agentic system
`extra_info` refers to the additional information that planner and worker agents provide to clarify their actions or decisions
```json
[
{
    "role: "planner",
    "extra_info": "Planner creates a plan.",
    "content" : "1. Retrieve Eligible Shipments for Top Up at NIN
   - Description: Query the database to find shipments eligible for "Top Up" at port NIN, originating from other SVVDs, that are connecting to vessel LL7-F2A-002 W.
   - Dependencies: None
   - Success Criteria: The list of eligible shipments for "Top Up" at NIN connecting to LL7-F2A-002 W from other SVVDs is retrieved and saved in memory.

2. Confirm and Summarize Results
   - Description: Confirm that the eligible shipments have been retrieved, state the number of shipments found, and summarize the results.
   - Dependencies: Subtask 1
   - Success Criteria: Confirmation that the shipments were found, the count is provided, and a summary of the results is available."
},
{
    "role": "worker",
    "extra_info": "Worker performed the first task and submits the results",
    "content": "Task completed successfully with result: Task completed: Retrieved 381 eligible shipments and stored them with key 'eligible_shipments_NIN_LL7-F2A-002_W'."
}
{
    "role": "planner",
    "extra_info": "Task 1 is completed, problem has been resolved, so the planner will terminate the process.",
    "content": "<terminate is_success="True", reason="All subtasks completed successfully: eligible shipments for Top Up at NIN connecting to LL7-F2A-002 W from other SVVDs were retrieved (381 found) and stored in memory.", result="381 eligible shipments for Top Up at NIN connecting to LL7-F2A-002 W from other SVVDs were found and stored with key 'eligible_shipments_NIN_LL7-F2A-002_W'.">"
}
]
```

- **Task Resolved:**  
[“Yes” or “No”]
```
Yes
```

- **User Feedback:** 
[Comments of how agent to resolve user task]
```
```

- **Supplementary Info:**  
[Logs, metrics, or additional contex after execution]
```
```

## Sample Output of the Experience Summarizer
[An example of the expected output]
```
**Task Description: ** 
- **Task:** ...

**Summary of Task Resolution History:**
...

**Task Resolution Status:**  
...

**Reasons for Failure:**
...  

**Key takeaway:**
...
```

## Output
- You should summerize the execution history of the agentic system first clearly without referencing user feedback. And followed by the actionable suggestions
